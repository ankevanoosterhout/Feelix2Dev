{"ast":null,"code":"/**\n * @license\n * Copyright 2017 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType } from './shader_compiler';\nexport class GatherProgram {\n  constructor(aShape, outputShape) {\n    this.variableNames = ['A', 'indices'];\n    this.outputShape = outputShape;\n    this.rank = outputShape.length;\n    const dtype = getCoordsDataType(this.rank);\n    const sourceCoords = getSourceCoords(aShape, 2);\n    this.userCode = `\n      void main() {\n        ${dtype} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${aShape[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${sourceCoords}));\n      }\n    `;\n  }\n\n} // The input and output are always flattened into rank 4 tensors.\n\nfunction getSourceCoords(aShape, axis) {\n  const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n  const sourceCoords = [];\n\n  for (let i = 0; i < aShape.length; i++) {\n    if (i === 2) {\n      sourceCoords.push('index');\n    } else {\n      sourceCoords.push(`${currentCoords[i]}`);\n    }\n  }\n\n  return sourceCoords.join();\n}","map":{"version":3,"names":["getCoordsDataType","GatherProgram","constructor","aShape","outputShape","variableNames","rank","length","dtype","sourceCoords","getSourceCoords","userCode","axis","currentCoords","i","push","join"],"sources":["C:/Users/Anke/Documents/Feelix documents/Feelix2.0-dev/Feelix v2/node_modules/@tensorflow/tfjs-backend-webgl/dist/gather_gpu.js"],"sourcesContent":["/**\n * @license\n * Copyright 2017 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { getCoordsDataType } from './shader_compiler';\nexport class GatherProgram {\n    constructor(aShape, outputShape) {\n        this.variableNames = ['A', 'indices'];\n        this.outputShape = outputShape;\n        this.rank = outputShape.length;\n        const dtype = getCoordsDataType(this.rank);\n        const sourceCoords = getSourceCoords(aShape, 2);\n        this.userCode = `\n      void main() {\n        ${dtype} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${aShape[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${sourceCoords}));\n      }\n    `;\n    }\n}\n// The input and output are always flattened into rank 4 tensors.\nfunction getSourceCoords(aShape, axis) {\n    const currentCoords = ['resRC.x', 'resRC.y', 'resRC.z', 'resRC.w'];\n    const sourceCoords = [];\n    for (let i = 0; i < aShape.length; i++) {\n        if (i === 2) {\n            sourceCoords.push('index');\n        }\n        else {\n            sourceCoords.push(`${currentCoords[i]}`);\n        }\n    }\n    return sourceCoords.join();\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,iBAAT,QAAkC,mBAAlC;AACA,OAAO,MAAMC,aAAN,CAAoB;EACvBC,WAAW,CAACC,MAAD,EAASC,WAAT,EAAsB;IAC7B,KAAKC,aAAL,GAAqB,CAAC,GAAD,EAAM,SAAN,CAArB;IACA,KAAKD,WAAL,GAAmBA,WAAnB;IACA,KAAKE,IAAL,GAAYF,WAAW,CAACG,MAAxB;IACA,MAAMC,KAAK,GAAGR,iBAAiB,CAAC,KAAKM,IAAN,CAA/B;IACA,MAAMG,YAAY,GAAGC,eAAe,CAACP,MAAD,EAAS,CAAT,CAApC;IACA,KAAKQ,QAAL,GAAiB;AACzB;AACA,UAAUH,KAAM;AAChB;AACA,oDAAoDL,MAAM,CAAC,CAAD,CAAI;AAC9D,oCAAoCM,YAAa;AACjD;AACA,KAPQ;EAQH;;AAfsB,C,CAiB3B;;AACA,SAASC,eAAT,CAAyBP,MAAzB,EAAiCS,IAAjC,EAAuC;EACnC,MAAMC,aAAa,GAAG,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,CAAtB;EACA,MAAMJ,YAAY,GAAG,EAArB;;EACA,KAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,MAAM,CAACI,MAA3B,EAAmCO,CAAC,EAApC,EAAwC;IACpC,IAAIA,CAAC,KAAK,CAAV,EAAa;MACTL,YAAY,CAACM,IAAb,CAAkB,OAAlB;IACH,CAFD,MAGK;MACDN,YAAY,CAACM,IAAb,CAAmB,GAAEF,aAAa,CAACC,CAAD,CAAI,EAAtC;IACH;EACJ;;EACD,OAAOL,YAAY,CAACO,IAAb,EAAP;AACH"},"metadata":{},"sourceType":"module"}